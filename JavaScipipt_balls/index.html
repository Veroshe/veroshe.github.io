<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8"/>
        <title> Bouncing balls </title>
        <style type="text/css">
            * { padding: 0; margin: 0;}
            canvas{
                background: #eeeeee;
                display: block;
                margin: 0 auto;

            }
            #myCanvas{
                width: 480px;
                height: 320px;
            }
        </style>
    </head>
    <body>
       <canvas id="myCanvas"></canvas>
    <script>
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");

        var x = canvas.width/2;
        var y = canvas.height-30;
        var ballradius = 10;


        var dx = 2;
        var dy = -2;
        var ifCollision = false;


        var balls=[];
        createballArray();


        requestAnimationFrame(animate);

        function animate(time){

            for(var i=0;i<balls.length;i++){
                collision(balls[i]);
                balls[i].x+=balls[i].dx;
                balls[i].y+=balls[i].dy;
            }


            draw();

            requestAnimationFrame(animate);
        }

        function createballArray(){
            for(var i=0;i<5;i++){
                var ball={
                    x: ((Math.random()* (canvas.width-20)) +10 ),
                    y: ((Math.random()* (canvas.height-20)) +10 ),
                    ballColor: randomColor(),
                    dx: 2,
                    dy: -2,
                    ifCollision: false,
                    vel: ran(1,5),
                    deg: ran(-179,180)
                            };
                balls.push(ball);

            }
        }
        function ran(min, max)
        {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function randomColor(){

            return '#' + (function co(lor){   return (lor +=
                    [0,1,2,3,4,5,6,7,8,9,'a','b','c','d','e','f'][Math.floor(Math.random()*16)])
                && (lor.length === 6) ?  lor : co(lor); })('');
        }

        function collision(ball){
            if(ball.x + ball.dx > canvas.width - ballradius || ball.x+ball.dx < ballradius) {
                ball.dx = -ball.dx;
                ball.ifCollision = true;
            }
            if(ball.y+ball.dy > canvas.height - ballradius || ball.y+ball.dy < ballradius) {
                ball.dy = -ball.dy;
                ball.ifCollision = true;
            }
            if(ball.ifCollision===true) {
                ball.ballColor = randomColor();
                ball.ifCollision=false;
            }
        }
        function draw(){
            ctx.clearRect(0,0,canvas.width,canvas.height);

            for(var i=0;i<balls.length;i++){
                ctx.beginPath();
                var ball = balls[i];
                ctx.arc(ball.x,ball.y, ballradius, 0, Math.PI * 2);
                ctx.fillStyle = balls[i].ballColor;
                ctx.fill();
                ctx.closePath();
            }

        }

    </script>
    </body>
</html>